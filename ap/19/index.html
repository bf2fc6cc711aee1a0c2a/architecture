<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Use a BFF component in front of our APIs to unify UX and client support | Application Services Architecture</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Use a BFF component in front of our APIs to unify UX and client support" />
<meta name="author" content="Andrea Peruffo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Intent" />
<meta property="og:description" content="Intent" />
<link rel="canonical" href="https://architecture.bf2.dev/ap/19/" />
<meta property="og:url" content="https://architecture.bf2.dev/ap/19/" />
<meta property="og:site_name" content="Application Services Architecture" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-04-17T14:56:12+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Use a BFF component in front of our APIs to unify UX and client support" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Andrea Peruffo"},"dateModified":"2023-04-17T14:56:12+00:00","datePublished":"2023-04-17T14:56:12+00:00","description":"Intent","headline":"Use a BFF component in front of our APIs to unify UX and client support","mainEntityOfPage":{"@type":"WebPage","@id":"https://architecture.bf2.dev/ap/19/"},"url":"https://architecture.bf2.dev/ap/19/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://architecture.bf2.dev/feed.xml" title="Application Services Architecture" /></head>
<body><link rel="icon" type="image/png" href="/favicon.png">
<header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Application Services Architecture</a>


    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
          </svg>
        </span>
      </label>

      <div class="trigger">
        <a class="page-link" href="/about/">About</a>
        <a class="page-link" href="/overview/">Overview</a>
        <a class="page-link" href="/context/">Context</a>
        <a class="page-link" href="/padr/">PADRs</a>
        <a class="page-link" href="/adr/">ADRs</a>
        <a class="page-link" href="/ap/">APs</a>
        <a class="page-link" href="/glossary/">Glossary</a>
        <!-- <a class="page-link" href="/component/">Components</a> -->
      </div>
    </nav></div>
</header>
<div class="wrapper">
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <link rel="stylesheet" href="/css/adr.css">
<article class="post">

  <!-- <header class="post-header">
    <h1 class="post-title">Use a BFF component in front of our APIs to unify UX and client support</h1>
  </header> -->

  <div class="post-content">
    <article class="post">
  <header class="post-header">
    <h1 class="post-title">AP-19: Use a BFF component in front of our APIs to unify UX and client support</h1>
  </header>

  <div>
    <div>Status: <span class="status-draft">Draft</span>
    
    </div>
    <div>Authors:
      
      
      
      
      Andrea Peruffo, 
      
      
      
      
      Riccardo Forina, 
      
      
      
      
      Eric Wittmann
      
    </div>
    
  </div>

  <div class="post-content">
    <div class="post-toc">
      <h2>Contents</h2>
      <ul class="sectlevel1">
<li><a href="#intent">Intent</a></li>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#applicability">Applicability</a></li>
<li><a href="#description">Description</a></li>
<li><a href="#participants">Participants</a></li>
<li><a href="#trade-offs">Trade-offs</a></li>
</ul>
    </div>
    
    <div class="sect1">
<h2 id="intent">Intent</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Define an architectural approach to better decouple backend services and frontend needs offering a more cohesive UX across devices and tools (such as UI and CLI).
Align all application services under the same implementation of that pattern (see description).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="motivation">Motivation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>UI and CLI needs to poll information from multiple separate sources causing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>poor UX, there is need for multiple network calls to offer simple functionalities</p>
</li>
<li>
<p>code duplication, data aggregation logic is scattered and duplicated across different frontend codebases</p>
</li>
<li>
<p>testing and mocking, decoupling frontend and backend systems with only one component</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="applicability">Applicability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This pattern applies when the functionality offered by frontend/CLI/etc. needs to access various APIs and do data aggregation logic in various forms.
In those cases placing a frontend opinionated component in front can be an appropriate solution to speed up development and be a single source of truth for integration logic.</p>
</div>
<div class="paragraph">
<p>A single BFF component is planned to host the API interactions of our various application services (Kafka, Connectors, Service registry etc).
This is a simplification choice that could be revisited if it becomes burdensome.
Until it is, alignment is expected.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Implementing a <a href="https://samnewman.io/patterns/architectural/bff/">BFF</a> for the backend services to better decouple and centralize the integration logic.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="with_BFF.png" alt="Proposed Architecture">
</div>
</div>
<div class="paragraph">
<p>Following are key contextual information to understand the pattern and its potential limitations.</p>
</div>
<div class="paragraph">
<p>Access to the underlying services will be done by propagating the original (user) access token to simplify development and to keep the security model similar to the current architecture.
See ADR 91 for more details.</p>
</div>
<div class="paragraph">
<p>The implementation choice went for a custom REST endpoint implementation as opposed to using GraphQL.
GraphQL is a popular technology built to address this or a similar set of use cases.
The team&#8217;s experience led to the choice of a custom REST endpoint but could be revisited by this or another team.</p>
</div>
<div class="paragraph">
<p>The API exposed will not be considered a stable contract usable by customers.
Only its usage through sanctioned clients (UI, CLI, SDK) are going to be supported.
This can be revisited with experience.</p>
</div>
<div class="paragraph">
<p>This proposal has not explored in detail the impact of private data plane clusters and could be impacted by that architectural evolution.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="participants">Participants</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For this pattern to apply you should have more than one "frontend" application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>UI</p>
</li>
<li>
<p>CLI</p>
</li>
<li>
<p>SDKs</p>
</li>
<li>
<p>mobile apps</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and multiple backend services offering together a piece of functionality.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trade-offs">Trade-offs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A single component in front of the backend, exclusively designed for frontend usage has a number of advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>better decoupling</p>
</li>
<li>
<p>looser frontend/backend dependency</p>
</li>
<li>
<p>a single point for shared/integration logic</p>
</li>
<li>
<p>caching</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the cost of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an additional backend component</p>
</li>
<li>
<p>risk of APIs proliferation</p>
</li>
</ul>
</div>
</div>
</div>  
  </div>

</article>
  
  </div>

</article>

      </div>
    </main><div class="edit">
  <a href="https://github.com/bf2fc6cc711aee1a0c2a/architecture/edit/main/_ap/19/index.adoc">âœŽ Edit this page</a>
</div>
</div>
<footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Application Services Architecture</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Application Services Architecture</li><li><a class="u-email" href="mailto:mk-support@redhat.com">mk-support@redhat.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div> 

      <div class="footer-col footer-col-3">
        <p>This site contains resources about the architecture and processes for Red Hat Application Services.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
