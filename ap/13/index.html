<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Waiting for DNS record creation | Application Services Architecture</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Waiting for DNS record creation" />
<meta name="author" content="Gerard Ryan" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="When a component depends on a DNS record that it doesn&#8217;t create itself, it should verify the existence of that record in the authoritative nameserver, before attempting to use it through the normal resolution path. The intention of this pattern is to avoid delays caused by negative DNS caching of the record in any resolvers on the normal resolution path, especially at service creation time." />
<meta property="og:description" content="When a component depends on a DNS record that it doesn&#8217;t create itself, it should verify the existence of that record in the authoritative nameserver, before attempting to use it through the normal resolution path. The intention of this pattern is to avoid delays caused by negative DNS caching of the record in any resolvers on the normal resolution path, especially at service creation time." />
<link rel="canonical" href="https://architecture.bf2.dev/ap/13/" />
<meta property="og:url" content="https://architecture.bf2.dev/ap/13/" />
<meta property="og:site_name" content="Application Services Architecture" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-04-17T14:56:12+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Waiting for DNS record creation" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Gerard Ryan"},"dateModified":"2023-04-17T14:56:12+00:00","datePublished":"2023-04-17T14:56:12+00:00","description":"When a component depends on a DNS record that it doesn&#8217;t create itself, it should verify the existence of that record in the authoritative nameserver, before attempting to use it through the normal resolution path. The intention of this pattern is to avoid delays caused by negative DNS caching of the record in any resolvers on the normal resolution path, especially at service creation time.","headline":"Waiting for DNS record creation","mainEntityOfPage":{"@type":"WebPage","@id":"https://architecture.bf2.dev/ap/13/"},"url":"https://architecture.bf2.dev/ap/13/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://architecture.bf2.dev/feed.xml" title="Application Services Architecture" /></head>
<body><link rel="icon" type="image/png" href="/favicon.png">
<header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Application Services Architecture</a>


    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
          </svg>
        </span>
      </label>

      <div class="trigger">
        <a class="page-link" href="/about/">About</a>
        <a class="page-link" href="/overview/">Overview</a>
        <a class="page-link" href="/context/">Context</a>
        <a class="page-link" href="/padr/">PADRs</a>
        <a class="page-link" href="/adr/">ADRs</a>
        <a class="page-link" href="/ap/">APs</a>
        <a class="page-link" href="/glossary/">Glossary</a>
        <!-- <a class="page-link" href="/component/">Components</a> -->
      </div>
    </nav></div>
</header>
<div class="wrapper">
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <link rel="stylesheet" href="/css/adr.css">
<article class="post">

  <!-- <header class="post-header">
    <h1 class="post-title">Waiting for DNS record creation</h1>
  </header> -->

  <div class="post-content">
    <article class="post">
  <header class="post-header">
    <h1 class="post-title">AP-13: Waiting for DNS record creation</h1>
  </header>

  <div>
    <div>Status: <span class="status-accepted">Accepted</span>
    
    </div>
    <div>Authors:
      
      
      
      
      Gerard Ryan
      
    </div>
    
  </div>

  <div class="post-content">
    <div class="post-toc">
      <h2>Contents</h2>
      
    </div>
    
    <div class="paragraph">
<p>When a component depends on a DNS record that it doesn&#8217;t create itself, it
should verify the existence of that record in the authoritative nameserver,
before attempting to use it through the normal resolution path.
The intention of this pattern is to avoid delays caused by negative DNS caching
of the record in any resolvers on the normal resolution path, especially at
service creation time.</p>
</div>
<div class="paragraph">
<p>Checking the existence of the DNS record could be done as a wait loop in the
start up routine of the component.
Alternatively the wait can be added as a pre-condition before starting the
component, such as by using an init container on a Pod in Kubernetes.
The latter approach might be used, for example, where the upstream project has
not released a version of the component with the ability, and it&#8217;s undesirable
to maintain a custom patch/fork of the component.</p>
</div>
<div class="paragraph">
<p>An example of this pattern in use can be seen in <a href="../../adr/76">ADR-76</a>.</p>
</div>  
  </div>

</article>
  
  </div>

</article>

      </div>
    </main><div class="edit">
  <a href="https://github.com/bf2fc6cc711aee1a0c2a/architecture/edit/main/_ap/13/index.adoc">âœŽ Edit this page</a>
</div>
</div>
<footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Application Services Architecture</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Application Services Architecture</li><li><a class="u-email" href="mailto:mk-support@redhat.com">mk-support@redhat.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div> 

      <div class="footer-col footer-col-3">
        <p>This site contains resources about the architecture and processes for Red Hat Application Services.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
